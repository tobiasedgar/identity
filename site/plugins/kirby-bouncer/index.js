(function () {function d(t){t.$router.afterEach(function(r,e){c(t)}),t.$store.watch(function(t){if(t.user.current)return t.user.current},function(r,e){c(t)})}function c(t,r){r=t.$data.user;(t.$el.classList.remove("bouncer-padding-top"),r&&r.nav&&Array.isArray(r.restriction)&&r.restriction.length>1)&&r.restriction.map(function(t){return t.path}).includes(t.$router.currentRoute.path)&&t.$el.classList.add("bouncer-padding-top")}var b={data:function(){return{user:void 0}},created:function(){var t=this;this.$api.get("current-user").then(function(r){t.user=r})},computed:{showBar:function(){return this.user&&this.user.nav&&Array.isArray(this.user.restriction)&&this.user.restriction.length>1},pages:function(){var t=this;return this.showBar?this.user.restriction.filter(function(r){return r.path!=t.$router.currentRoute.path}):[]}}};if(typeof b==="function"){b=b.options}Object.assign(b,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm.showBar?_c("div",{staticClass:"bouncer-nav"},[_c("div",{staticClass:"bouncer-nav-inner"},[_c("strong",[_vm._v("Basculer vers :")]),_vm._v(" "),_vm._l(_vm.pages,function(page){return _c("div",{staticClass:"page"},[_c("k-link",{attrs:{"to":page.path}},[_vm._v(_vm._s(page.title))])],1)})],2)]):_vm._e()};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());panel.plugin("sylvainjule/bouncer",{sections:{bouncernav:b},created:function(t){t.$store.dispatch("system/load").then(function(r){if(!r.isReady)return!0;function e(r,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=t.$data.user;n&&Array.isArray(n.restriction)&&n.restriction.length?!function(t,r){var e="Account"==t.name||"/account"==t.path||"/logout"==t.path||"/login"==t.path;!e&&Array.isArray(r.restriction)&&r.restriction.forEach(function(r){t.path.slice(0,r.path.length)==r.path&&(e=!0)});return e}(r,n)?e?e(n.restriction[0].path):t.$router.push(n.restriction[0].path):e&&("/logout"!=r.path&&"/login"!=r.path||(t.$data.user=void 0),e()):e&&e()}function n(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&("/login"==t.$router.currentRoute.path||"/"==t.$router.currentRoute.path))return!1;t.$api.get("current-user").then(function(r){t.$data.user=r,e&&e()}).catch(function(t){e&&e()})}d(t),t.$router.onReady(function(){n(!0,function(){e(t.$router.currentRoute,void 0)})}),t.$router.beforeResolve(function(r,o,a){"/login"==o.path&&(t.$data.user=void 0),t.$data.user?e(r,a):n(!1,function(){e(r,a)})})})}});})();